<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OriHome by Orinoco</title>
    <description></description>
    <script src="https://kit.fontawesome.com/ead44a5493.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>

<body>

    <header>
        <a href="index.html"><img src="./images/logo.png" alt="Lien Page d'accueil Orinoco"></a>
        <nav>
            <ul>
                <li><a href="#">OriBook</a></li>
                <li><a href="#">OriTextil</a></li>
                <li><a href="#">OriHome</a></li>
                <li><a href="#">OriFood</a></li>
                <li><a href="#">Envie d'autre chose ?</a></li>
            </ul>
        </nav>
        <a href="cart.html"><span class="fa fa-shopping-basket"></span><p>Votre panier</p></a>
    </header>

    <main>
        <h1>Trouvez la déco qui vous correspond grâce à OriHome ! </h1>

        <section>
            <h2>Produits disponibles :</h2>

            <article>
                <h3>Ours en peluche fait main</h3>
                <ul id="teddies"> </ul>
            </article>

            <article>
                <h3>Caméras vintage</h3>
                <ul id="cameras"> </ul>
            </article>

            <article>
                <h3>Meubles en chêne</h3>
                <ul id="furniture"> </ul>
            </article>

            <script type="text/javascript">

                function creatingLists(listID){

                    var request = new XMLHttpRequest();
                    var ul = document.getElementById(listID);
                    var urlAPI = "http://localhost:3000/api/" + listID;

                    request.onreadystatechange = function() {
                        if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
                            var response = JSON.parse(this.responseText);
                            for( let i=0;i < response.length;i++){
                                var li = document.createElement('li');
                                li.innerHTML = '<figure id="'+response[i]._id+
                                '"><img src="'+response[i].imageUrl+'"alt=""><figcaption><p class="item-name">'+
                                    response[i].name+'</p><p class="item-price">'+
                                        response[i].price+' €</p></figcaption></figure>';
                                ul.appendChild(li); 
    /*                       $("#Teddies").append('<li><figure><img src="'+response[i].imageUrl+'"alt=""><figcaption>'+response[i].name+'</figcaption></figure></li>');*/
                            }
                        }
                    };
                    request.open("GET", urlAPI);
                    request.send();
                }
                creatingLists("teddies");
                creatingLists("furniture");
                creatingLists("cameras");
            </script>
        </section>
    </main>

    <footer>
        <h3>Orinoco</h3>
        <section>
            <h4>Mieux nous connaître</h4>
            <ul>
                <li><a href="#">A propos d'Orinoco</a></li>
                <li><a href="#">Conditions générales de vente</a></li>
            </ul>
        </section>
        <section>
            <h4>Besoin d'aide ?</h4>
            <ul>
                <li><a href="#">Foire aux questions</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </section>

    </footer>
    
</body>

</html>